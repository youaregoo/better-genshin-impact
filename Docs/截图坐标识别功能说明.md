# 截图坐标识别功能

## 功能说明

该功能允许用户上传原神游戏截图，自动识别截图中对应的游戏坐标。这对于记录特定位置、分享坐标信息或进行位置分析非常有用。

## 使用方法

1. **启动应用程序**
   - 打开 Better Genshin Impact 应用程序
   - 在侧边导航栏中找到"全自动"菜单
   - 点击"截图识坐标"

2. **上传截图**
   - 点击"选择截图"按钮
   - 在文件对话框中选择游戏截图文件
   - 支持的格式：JPG、JPEG、PNG、BMP、GIF

3. **识别坐标**
   - 图片加载后，点击"识别坐标"按钮
   - 系统将自动分析截图并匹配地图坐标
   - 等待处理完成（通常需要几秒钟）

4. **查看结果**
   - 识别成功后，右侧面板会显示坐标信息
   - 包含 X 坐标、Y 坐标和格式化的坐标字符串
   - 可以点击"复制坐标"将结果复制到剪贴板

## 技术原理

该功能基于现有的地图识别系统，使用以下技术：

- **SIFT 特征匹配**：提取图像特征点进行精确匹配
- **透视变换**：计算截图在完整地图中的位置
- **坐标系转换**：将图像坐标转换为游戏内坐标

## 使用要求

1. **截图质量**
   - 截图应清晰，无模糊或严重变形
   - 地图区域应占据截图的主要部分
   - 避免过多的UI元素遮挡地图

2. **支持区域**
   - 当前主要支持提瓦特大陆地图
   - 其他区域（如深渊、秘境）可能无法识别

3. **图片大小**
   - 建议图片大小不超过 1920x1080
   - 过大的图片会自动缩放以提高处理速度

## 故障排除

### 识别失败的可能原因

1. **地图不清晰**
   - 解决方案：使用更清晰的截图

2. **UI遮挡过多**
   - 解决方案：关闭游戏内地图UI，使用纯地图截图

3. **非提瓦特地图**
   - 解决方案：确保截图来自提瓦特大陆主地图

4. **图片损坏**
   - 解决方案：检查图片文件是否完整，重新截图

### 错误信息说明

- "识别失败，请检查图片是否为有效的游戏截图"：图片无法识别为地图
- "无法从截图中提取地图区域"：无法定位地图区域
- "地图匹配失败，无法识别坐标"：特征匹配失败

## 开发信息

### 核心类

- `ScreenshotCoordinateService`：核心服务类，处理截图识别逻辑
- `ScreenshotCoordinateViewModel`：UI 视图模型
- `ScreenshotCoordinatePage`：用户界面页面

### 扩展性

该功能设计时考虑了扩展性：

1. **新地图支持**：可以通过添加新的地图数据支持其他区域
2. **算法优化**：可以替换或改进特征匹配算法
3. **批量处理**：可以扩展为支持批量截图处理

## 注意事项

- 该功能需要加载地图特征数据，首次使用可能需要较长时间
- 识别精度受截图质量和地图复杂度影响
- 建议在稳定的网络环境下使用
- 处理大图片时可能消耗较多内存

## 反馈和改进

如果您在使用过程中遇到问题或有改进建议，请：

1. 记录具体的错误信息
2. 保存导致问题的截图文件
3. 通过项目的 Issue 系统提交反馈